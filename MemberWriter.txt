/**
 * @DanLaskero
 */
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.Scanner;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import java.beans.XMLEncoder;
import java.beans.XMLDecoder;


public class MemberWriter {


 // write data to file 
// member will be written to the file
    public static void write(ArrayList<Member> dl, Scanner scan) {
        System.out.print("(T)ext, (B)inary, or (X)ML? ");
        String type = scan.next();
        System.out.print("Enter name of output file: ");
        String fileName = scan.next();
        System.out.println("");
        try {
            switch (type) {
                case "T":
                    writeText(dl, fileName);
                    System.out.println("Members were written successfully.");
                    break;
                case "B":
                    writeBinary(dl, fileName);
                    System.out.println("Members were written successfully.");
                    break;
                case "X":
                    writeXML(dl, fileName);
                    System.out.println("Members were written successfully.");
                    break;
                default:
                    break;
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }


 // write data to xml file  
 
    private static void writeXML(ArrayList<Member> dl, String fileName) throws JAXBException {

        JAXBContext jaxbContext = JAXBContext.newInstance(Members.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        Members member = new Members();
        member.setMembers(dl);
        jaxbMarshaller.marshal(member, new File(fileName));    
    }

/**
*  write data to binary file 
*/
    private static void writeBinary(ArrayList<Member> dl, String fileName)
            throws FileNotFoundException, IOException {
        FileOutputStream fos = new FileOutputStream(new File(fileName));
        ObjectOutputStream os = new ObjectOutputStream(fos);
        Members member = new Members();
        member.setMembers(dl);
        os.writeObject(member);        
        os.close();
        fos.close();
    }
  

 //write data to text file 

    private static void writeText(ArrayList<Member> dl, String fileName) throws IOException {
        FileWriter fw = new FileWriter(fileName);
        for (Member member : dl) {
            fw.write(member.toStringWithTab() + System.lineSeparator());
        }
        fw.close();
    }
}